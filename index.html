<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Projects - Password Manager</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(90deg, #FFC0CB 0%, #FF2E51 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            transition: background 0.5s ease;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        h1 {
            color: #c59d26;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            color: #db7f4a;
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .password-input-container {
            margin: 30px 0;
            text-align: center;
        }
        
        .password-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .password-segment {
            width: 100%;
            max-width: 400px;
            height: 60px;
            text-align: center;
            font-size: 1.4rem;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transition: all 0.3s ease;
            padding: 0 50px 0 20px;
        }
        
        .password-segment:focus {
            outline: none;
            border-color: #ffcc00;
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.7);
            transform: scale(1.02);
        }

        .password-segment::placeholder {
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            transition: color 0.3s ease;
        }

        .toggle-password:hover {
            color: #ffcc00;
        }
        
        .btn-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .submit-btn {
            background: linear-gradient(to right, #D6998D, #FFB100);
            color: #111;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            min-width: 180px;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }
        
        .submit-btn:active {
            transform: translateY(1px);
        }

        .btn-secondary {
            background: linear-gradient(to right, #6a11cb, #2575fc);
        }

        /* Content Pages Styles */
        .content-page {
            display: none;
        }

        .page-content {
            margin: 30px 0;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Text Page */
        .language-text {
            font-size: 1.5rem;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-align: center;
            line-height: 1.6;
            max-width: 600px;
            width: 100%;
        }

        /* Video Page */
        .video-container {
            width: 100%;
            max-width: 560px;
        }

        .video-container iframe {
            width: 100%;
            height: 315px;
            border-radius: 15px;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        /* Photos Page */
        .photos-container {
            width: 100%;
            max-width: 500px;
            position: relative;
            margin: 20px 0;
        }

        .photo-slider {
            position: relative;
            width: 100%;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
        }

        .photo-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .photo-slide.active {
            opacity: 1;
        }

        .photo-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-slide .text-photo {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            padding: 20px;
        }

        .photo-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .photo-nav:hover {
            background: rgba(0, 0, 0, 0.7);
            transform: translateY(-50%) scale(1.1);
        }

        .prev-photo {
            left: 10px;
        }

        .next-photo {
            right: 10px;
        }

        .photo-counter {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* Page Links */
        .page-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
            width: 100%;
            max-width: 600px;
        }

        .page-link {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .page-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #764ba2, #667eea);
        }

        .page-link i {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .page-link span {
            font-size: 1.1rem;
            font-weight: bold;
        }

        /* Configuration Page Styles */
        .config-form {
            text-align: left;
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #ffcc00;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .form-input:focus {
            outline: none;
            border-color: #ffcc00;
            background: rgba(255, 255, 255, 0.2);
        }

        /* Photo Upload Styles */
        .photo-upload-container {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
        }

        .photo-upload-container.drag-over {
            border-color: #ffcc00;
            background: rgba(255, 255, 255, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 15px;
        }

        .upload-text {
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.8);
        }

        .file-input {
            display: none;
        }

        .upload-btn {
            background: linear-gradient(to right, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .uploaded-photos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .uploaded-photo {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .uploaded-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-photo {
            position: absolute;
            top: 2px;
            right: 2px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Color Picker Styles */
        .color-picker-container {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .color-preview {
            width: 60px;
            height: 60px;
            border-radius: 10px;
            border: 3px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .color-preview:hover {
            transform: scale(1.1);
        }

        .color-input-group {
            flex: 1;
            min-width: 200px;
        }

        .hex-input {
            font-family: monospace;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .color-presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(40px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .color-preset {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .color-preset:hover {
            transform: scale(1.2);
            border-color: white;
        }

        .back-btn {
            background: linear-gradient(to right, #667eea, #764ba2);
            margin-top: 20px;
        }

        .message {
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-weight: bold;
        }

        .success {
            background: rgba(76, 175, 80, 0.3);
            border: 1px solid #4caf50;
        }

        .error {
            background: rgba(244, 67, 54, 0.3);
            border: 1px solid #f44336;
        }

        /* Admin Panel Styles */
        .admin-panel {
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .passwords-list {
            text-align: left;
            margin: 15px 0;
        }

        .password-item {
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #ffcc00;
        }

        /* Hidden admin access */
        .hidden-admin {
            display: none;
        }

        /* Mobile-friendly touch improvements */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .password-segment {
                height: 55px;
                font-size: 1.2rem;
                max-width: 100%;
            }
            
            .submit-btn {
                padding: 14px 25px;
                font-size: 1rem;
                min-width: 160px;
                width: 100%;
            }

            .btn-container {
                flex-direction: column;
                align-items: center;
            }

            .language-text {
                font-size: 1.2rem;
                padding: 20px;
            }

            .photo-slider {
                height: 250px;
            }

            .photo-nav {
                width: 45px;
                height: 45px;
                font-size: 1.1rem;
            }

            .page-links {
                grid-template-columns: 1fr;
            }

            .page-link {
                padding: 15px;
            }

            .page-link i {
                font-size: 1.8rem;
            }

            .video-container iframe {
                height: 250px;
            }

            .color-picker-container {
                flex-direction: column;
                align-items: stretch;
            }

            .color-preview {
                width: 100%;
                height: 80px;
            }

            .uploaded-photos {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }

            .uploaded-photo {
                width: 80px;
                height: 80px;
            }
        }

        @media (max-width: 480px) {
            .photo-slider {
                height: 200px;
            }
            
            .photo-nav {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
            
            .language-text {
                font-size: 1.1rem;
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }

        /* Touch-friendly improvements */
        .photo-nav {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .submit-btn, .nav-btn, .upload-btn {
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
    </style>
</head>
<body>
    <!-- Main Page -->
    <div class="container main-page">
        <h1>Love Projects</h1>
        <p class="subtitle">Enter password to access your content</p>
        <div class="password-input-container">
            <div class="password-input">
                <input type="password" id="passwordInput" class="password-segment" placeholder="Enter your password">
                <button type="button" class="toggle-password" id="togglePassword">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
            <div class="btn-container">
                <button class="submit-btn" id="accessBtn">Access Content</button>
                <button class="submit-btn btn-secondary" id="configBtn">Create New</button>
                <!-- Admin button is hidden and will be shown only when password "292006" is entered -->
                <button class="submit-btn hidden-admin" id="adminBtn" style="background: linear-gradient(to right, #11998e, #38ef7d);">Admin Panel</button>
            </div>
        </div>
        <div id="message"></div>
    </div>

    <!-- Content Selection Page -->
    <div class="container content-page" id="contentSelectionPage">
        <h1>Your Content</h1>
        <p class="subtitle">Choose what you want to see</p>
        
        <div class="page-links">
            <a href="#" class="page-link" id="textPageLink">
                <i class="fas fa-file-alt"></i>
                <span>Read Message</span>
            </a>
            <a href="#" class="page-link" id="videoPageLink">
                <i class="fas fa-play-circle"></i>
                <span>Watch Video</span>
            </a>
            <a href="#" class="page-link" id="photosPageLink">
                <i class="fas fa-images"></i>
                <span>View Photos</span>
            </a>
        </div>
        
        <button class="submit-btn back-btn" onclick="showPage('main')">Back to Main</button>
    </div>

    <!-- Text Content Page -->
    <div class="container content-page" id="textPage">
        <h1>Your Special Message</h1>
        <div class="page-content">
            <div class="language-text" id="languageText">
                Welcome to your personalized content!
            </div>
        </div>
        <button class="submit-btn back-btn" onclick="showPage('contentSelection')">Back to Selection</button>
    </div>

    <!-- Video Content Page -->
    <div class="container content-page" id="videoPage">
        <h1>Your Special Video</h1>
        <div class="page-content">
            <div class="video-container">
                <iframe id="contentVideo" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
        <button class="submit-btn back-btn" onclick="showPage('contentSelection')">Back to Selection</button>
    </div>

    <!-- Photos Content Page -->
    <div class="container content-page" id="photosPage">
        <h1>Your Special Photos</h1>
        <div class="page-content">
            <div class="photos-container">
                <div class="photo-slider" id="photoSlider">
                    <!-- Photos will be dynamically added here -->
                </div>
                <button class="photo-nav prev-photo" onclick="changePhoto(-1)">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button class="photo-nav next-photo" onclick="changePhoto(1)">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <div class="photo-counter" id="photoCounter">1/4</div>
            </div>
        </div>
        <button class="submit-btn back-btn" onclick="showPage('contentSelection')">Back to Selection</button>
    </div>

    <!-- Configuration Page -->
    <div class="container content-page" id="configPage">
        <h1>Create New Content</h1>
        <div class="config-form">
            <div class="form-group">
                <label for="newPassword">Choose Password:</label>
                <input type="text" id="newPassword" class="form-input" placeholder="Enter new password">
            </div>
            <div class="form-group">
                <label for="languageContent">Content Text (Any Language):</label>
                <textarea id="languageContent" class="form-input" rows="3" placeholder="Enter your special text..."></textarea>
            </div>
            <div class="form-group">
                <label for="youtubeLink">YouTube Video ID (e.g., dQw4w9WgXcQ):</label>
                <input type="text" id="youtubeLink" class="form-input" placeholder="Enter YouTube video ID">
            </div>
            <div class="form-group">
                <label for="colorCode">Background Color Code (Hex):</label>
                <div class="color-picker-container">
                    <div class="color-preview" id="colorPreview" style="background: #FFC0CB;"></div>
                    <div class="color-input-group">
                        <input type="color" id="colorPicker" class="form-input" value="#FFC0CB" style="height: 50px; padding: 5px;">
                        <input type="text" id="colorCode" class="form-input hex-input" value="#FFC0CB" placeholder="#FFFFFF" maxlength="7" style="margin-top: 10px;">
                    </div>
                </div>
                <div class="color-presets" id="colorPresets">
                    <!-- Color presets will be added here -->
                </div>
            </div>
            <div class="form-group">
                <label>Upload Photos (Max 4 photos):</label>
                <div class="photo-upload-container" id="photoUploadContainer">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">
                        <p>Drag & drop photos here or click to browse</p>
                        <p style="font-size: 0.9rem; opacity: 0.7;">Supported formats: JPG, PNG, GIF</p>
                    </div>
                    <button class="upload-btn" onclick="document.getElementById('photoInput').click()">
                        Choose Photos
                    </button>
                    <input type="file" id="photoInput" class="file-input" accept="image/*" multiple>
                    <div class="uploaded-photos" id="uploadedPhotos">
                        <!-- Uploaded photos preview will appear here -->
                    </div>
                </div>
            </div>
        </div>
        <div class="btn-container">
            <button class="submit-btn" id="saveConfigBtn">Save Configuration</button>
            <button class="submit-btn back-btn" onclick="showPage('main')">Back to Main</button>
        </div>
        <div id="configMessage"></div>
    </div>

    <!-- Admin Panel -->
    <div class="container content-page" id="adminPage">
        <h1>Admin Panel</h1>
        <p class="subtitle">Manage all passwords and content</p>
        
        <div class="admin-panel">
            <h3>Existing Passwords:</h3>
            <div class="passwords-list" id="passwordsList">
                <!-- Passwords will be listed here -->
            </div>
            <button class="submit-btn" onclick="exportDatabase()">Export Database</button>
            <button class="submit-btn" style="background: linear-gradient(to right, #f46b45, #eea849);" onclick="resetDatabase()">Reset to Default</button>
        </div>
        
        <button class="submit-btn back-btn" onclick="showPage('main')">Back to Main</button>
        <div id="adminMessage"></div>
    </div>

    <script>
        // EMBEDDED DATABASE - All data stored directly in this variable
        let embeddedDatabase = {
            "love123": {
                languageText: "مرحبا بك في عالم الحب! هذا هو محتواك الخاص. Welcome to the world of love! This is your special content.",
                youtubeVideo: "dQw4w9WgXcQ",
                backgroundColor: "#FFC0CB",
                photos: ["Romantic Photo 1", "Sweet Memory 2", "Love Moment 3", "Special Photo 4"]
            },
            "forever": {
                languageText: "Je t'aimerai toujours et à jamais. Mon cœur est à toi pour l'éternité.",
                youtubeVideo: "9bZkp7q19f0",
                backgroundColor: "#FF69B4",
                photos: ["Paris Memory", "Eiffel Tower", "Romantic Dinner", "Sunset Walk"]
            },
            "secret": {
                languageText: "これは私たちの秘密のメッセージです。永遠に愛しています。",
                youtubeVideo: "L_jWHffIx5E",
                backgroundColor: "#9370DB",
                photos: ["Tokyo Night", "Cherry Blossom", "Temple Visit", "Mountain View"]
            }
        };

        // Color presets for quick selection
        const colorPresets = [
            '#FFC0CB', '#FF69B4', '#FF1493', '#DB7093', '#C71585', // Pink shades
            '#FFB6C1', '#FFA07A', '#FF7F50', '#FF6347', '#FF4500', // Coral/Orange
            '#FFD700', '#FFA500', '#FF8C00', '#DA70D6', '#EE82EE', // Gold/Violet
            '#9370DB', '#8A2BE2', '#9400D3', '#9932CC', '#BA55D3', // Purple shades
            '#00BFFF', '#1E90FF', '#0000FF', '#8A2BE2', '#4B0082', // Blue shades
            '#32CD32', '#00FF00', '#9ACD32', '#6B8E23', '#228B22', // Green shades
            '#FF0000', '#DC143C', '#B22222', '#8B0000', '#800000'  // Red shades
        ];

        // Admin password
        const ADMIN_PASSWORD = "292006";

        // Store uploaded photos temporarily
        let uploadedPhotos = [];

        // Current content for navigation
        let currentContent = null;
        let currentPhotoIndex = 0;

        // Initialize database in localStorage if not exists
        function initializeDatabase() {
            if (!localStorage.getItem('passwordDatabase')) {
                localStorage.setItem('passwordDatabase', JSON.stringify(embeddedDatabase));
            }
            return JSON.parse(localStorage.getItem('passwordDatabase'));
        }

        // Get current database
        function getDatabase() {
            return JSON.parse(localStorage.getItem('passwordDatabase')) || embeddedDatabase;
        }

        // Save database to localStorage
        function saveDatabase(db) {
            localStorage.setItem('passwordDatabase', JSON.stringify(db));
        }

        // Handle photo uploads
        function handlePhotoUpload(files) {
            const uploadedPhotosContainer = document.getElementById('uploadedPhotos');
            
            for (let file of files) {
                if (!file.type.startsWith('image/')) {
                    alert('Please upload only image files!');
                    continue;
                }

                if (uploadedPhotos.length >= 4) {
                    alert('Maximum 4 photos allowed!');
                    break;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    const photoData = e.target.result;
                    uploadedPhotos.push(photoData);
                    
                    // Create preview
                    const photoDiv = document.createElement('div');
                    photoDiv.className = 'uploaded-photo';
                    
                    const img = document.createElement('img');
                    img.src = photoData;
                    img.alt = 'Uploaded photo';
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-photo';
                    removeBtn.innerHTML = '×';
                    removeBtn.onclick = () => removePhoto(photoData);
                    
                    photoDiv.appendChild(img);
                    photoDiv.appendChild(removeBtn);
                    uploadedPhotosContainer.appendChild(photoDiv);
                };
                reader.readAsDataURL(file);
            }
        }

        // Remove uploaded photo
        function removePhoto(photoData) {
            uploadedPhotos = uploadedPhotos.filter(photo => photo !== photoData);
            updatePhotoPreviews();
        }

        // Update photo previews
        function updatePhotoPreviews() {
            const uploadedPhotosContainer = document.getElementById('uploadedPhotos');
            uploadedPhotosContainer.innerHTML = '';
            
            uploadedPhotos.forEach(photoData => {
                const photoDiv = document.createElement('div');
                photoDiv.className = 'uploaded-photo';
                
                const img = document.createElement('img');
                img.src = photoData;
                img.alt = 'Uploaded photo';
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-photo';
                removeBtn.innerHTML = '×';
                removeBtn.onclick = () => removePhoto(photoData);
                
                photoDiv.appendChild(img);
                photoDiv.appendChild(removeBtn);
                uploadedPhotosContainer.appendChild(photoDiv);
            });
        }

        // Initialize photo upload functionality
        function initializePhotoUpload() {
            const photoInput = document.getElementById('photoInput');
            const uploadContainer = document.getElementById('photoUploadContainer');

            // File input change
            photoInput.addEventListener('change', (e) => {
                handlePhotoUpload(Array.from(e.target.files));
                photoInput.value = ''; // Reset input
            });

            // Drag and drop functionality
            uploadContainer.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadContainer.classList.add('drag-over');
            });

            uploadContainer.addEventListener('dragleave', () => {
                uploadContainer.classList.remove('drag-over');
            });

            uploadContainer.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadContainer.classList.remove('drag-over');
                handlePhotoUpload(Array.from(e.dataTransfer.files));
            });

            // Click to upload
            uploadContainer.addEventListener('click', (e) => {
                if (e.target === uploadContainer || e.target.classList.contains('upload-icon') || e.target.classList.contains('upload-text')) {
                    photoInput.click();
                }
            });
        }

        // Toggle password visibility
        function togglePasswordVisibility() {
            const passwordInput = document.getElementById('passwordInput');
            const toggleButton = document.getElementById('togglePassword');
            const icon = toggleButton.querySelector('i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.className = 'fas fa-eye-slash';
                toggleButton.title = 'Hide password';
            } else {
                passwordInput.type = 'password';
                icon.className = 'fas fa-eye';
                toggleButton.title = 'Show password';
            }
        }

        // Check for admin password and show/hide admin button
        function checkAdminAccess() {
            const passwordInput = document.getElementById('passwordInput');
            const adminBtn = document.getElementById('adminBtn');
            
            if (passwordInput.value === ADMIN_PASSWORD) {
                adminBtn.classList.remove('hidden-admin');
            } else {
                adminBtn.classList.add('hidden-admin');
            }
        }

        // Initialize color picker functionality
        function initializeColorPicker() {
            const colorPicker = document.getElementById('colorPicker');
            const colorCode = document.getElementById('colorCode');
            const colorPreview = document.getElementById('colorPreview');
            const colorPresetsContainer = document.getElementById('colorPresets');

            // Sync color picker with hex input
            colorPicker.addEventListener('input', function() {
                colorCode.value = this.value.toUpperCase();
                colorPreview.style.background = this.value;
            });

            // Sync hex input with color picker
            colorCode.addEventListener('input', function() {
                let value = this.value.toUpperCase();
                
                // Add # if missing
                if (!value.startsWith('#')) {
                    value = '#' + value;
                }
                
                // Validate hex color
                if (/^#[0-9A-F]{6}$/i.test(value)) {
                    colorPicker.value = value;
                    colorPreview.style.background = value;
                    this.value = value;
                }
            });

            // Create color presets
            colorPresets.forEach(color => {
                const preset = document.createElement('div');
                preset.className = 'color-preset';
                preset.style.background = color;
                preset.title = color;
                preset.addEventListener('click', function() {
                    colorPicker.value = color;
                    colorCode.value = color;
                    colorPreview.style.background = color;
                });
                colorPresetsContainer.appendChild(preset);
            });
        }

        // Validate hex color
        function isValidHexColor(color) {
            return /^#[0-9A-F]{6}$/i.test(color);
        }

        // Show specific page and hide others
        function showPage(pageName) {
            document.querySelectorAll('.content-page').forEach(page => {
                page.style.display = 'none';
            });
            document.querySelector('.main-page').style.display = 'none';
            
            switch(pageName) {
                case 'main':
                    document.querySelector('.main-page').style.display = 'block';
                    document.getElementById('passwordInput').value = '';
                    document.getElementById('passwordInput').focus();
                    // Hide admin button when returning to main page
                    document.getElementById('adminBtn').classList.add('hidden-admin');
                    break;
                case 'contentSelection':
                    document.getElementById('contentSelectionPage').style.display = 'block';
                    break;
                case 'config':
                    document.getElementById('configPage').style.display = 'block';
                    // Reset form when opening config
                    document.getElementById('colorPicker').value = '#FFC0CB';
                    document.getElementById('colorCode').value = '#FFC0CB';
                    document.getElementById('colorPreview').style.background = '#FFC0CB';
                    uploadedPhotos = [];
                    updatePhotoPreviews();
                    break;
                case 'admin':
                    document.getElementById('adminPage').style.display = 'block';
                    displayPasswordsList();
                    break;
            }
        }

        // Show specific content page
        function showContentPage(pageType) {
            document.querySelectorAll('.content-page').forEach(page => {
                page.style.display = 'none';
            });
            
            switch(pageType) {
                case 'text':
                    document.getElementById('textPage').style.display = 'block';
                    break;
                case 'video':
                    document.getElementById('videoPage').style.display = 'block';
                    break;
                case 'photos':
                    document.getElementById('photosPage').style.display = 'block';
                    break;
            }
        }

        // Change photo in slider
        function changePhoto(direction) {
            const photos = currentContent.uploadedPhotos && currentContent.uploadedPhotos.length > 0 
                ? currentContent.uploadedPhotos 
                : currentContent.photos;
            
            currentPhotoIndex += direction;
            
            if (currentPhotoIndex < 0) {
                currentPhotoIndex = photos.length - 1;
            } else if (currentPhotoIndex >= photos.length) {
                currentPhotoIndex = 0;
            }
            
            updatePhotoSlider();
        }

        // Update photo slider
        function updatePhotoSlider() {
            const photoSlider = document.getElementById('photoSlider');
            const photoCounter = document.getElementById('photoCounter');
            const photos = currentContent.uploadedPhotos && currentContent.uploadedPhotos.length > 0 
                ? currentContent.uploadedPhotos 
                : currentContent.photos;
            
            photoSlider.innerHTML = '';
            
            photos.forEach((photo, index) => {
                const slide = document.createElement('div');
                slide.className = `photo-slide ${index === currentPhotoIndex ? 'active' : ''}`;
                
                if (currentContent.uploadedPhotos && currentContent.uploadedPhotos.length > 0) {
                    const img = document.createElement('img');
                    img.src = photo;
                    img.alt = `Photo ${index + 1}`;
                    slide.appendChild(img);
                } else {
                    const textDiv = document.createElement('div');
                    textDiv.className = 'text-photo';
                    textDiv.textContent = photo;
                    slide.appendChild(textDiv);
                }
                
                photoSlider.appendChild(slide);
            });
            
            photoCounter.textContent = `${currentPhotoIndex + 1}/${photos.length}`;
        }

        // Check password and show content selection
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            const messageDiv = document.getElementById('message');
            const db = getDatabase();
            
            // First check if it's the admin password
            if (password === ADMIN_PASSWORD) {
                showPage('admin');
                messageDiv.innerHTML = '';
                return;
            }
            
            if (db[password]) {
                currentContent = db[password];
                currentPhotoIndex = 0;
                
                // Update text page
                document.getElementById('languageText').textContent = currentContent.languageText;
                
                // Update video page
                document.getElementById('contentVideo').src = `https://www.youtube.com/embed/${currentContent.youtubeVideo}`;
                
                // Update photo slider
                updatePhotoSlider();
                
                // Change background color
                document.body.style.background = `linear-gradient(90deg, ${currentContent.backgroundColor} 0%, #FF2E51 100%)`;
                
                // Show content selection page
                showPage('contentSelection');
                messageDiv.innerHTML = '';
            } else {
                messageDiv.innerHTML = '<div class="message error">Invalid password! Please try again or create new content.</div>';
                document.getElementById('passwordInput').focus();
            }
        }

        // Save new configuration
        function saveConfiguration() {
            const newPassword = document.getElementById('newPassword').value;
            const languageContent = document.getElementById('languageContent').value;
            const youtubeLink = document.getElementById('youtubeLink').value;
            const colorCode = document.getElementById('colorCode').value;
            const messageDiv = document.getElementById('configMessage');
            
            if (!newPassword || !languageContent || !youtubeLink) {
                messageDiv.innerHTML = '<div class="message error">Please fill all fields!</div>';
                return;
            }

            if (!isValidHexColor(colorCode)) {
                messageDiv.innerHTML = '<div class="message error">Please enter a valid hex color code (e.g., #FFC0CB)!</div>';
                return;
            }
            
            const db = getDatabase();
            
            if (db[newPassword]) {
                messageDiv.innerHTML = '<div class="message error">Password already exists! Choose a different password.</div>';
                return;
            }
            
            // Save new configuration with uploaded photos
            db[newPassword] = {
                languageText: languageContent,
                youtubeVideo: youtubeLink,
                backgroundColor: colorCode.toUpperCase(),
                photos: ["Photo 1", "Photo 2", "Photo 3", "Photo 4"], // Fallback text
                uploadedPhotos: uploadedPhotos // Store actual uploaded images
            };
            
            saveDatabase(db);
            
            messageDiv.innerHTML = '<div class="message success">Configuration saved successfully! You can now access it with your password: <strong>' + newPassword + '</strong></div>';
            
            // Clear form
            document.getElementById('newPassword').value = '';
            document.getElementById('languageContent').value = '';
            document.getElementById('youtubeLink').value = '';
            uploadedPhotos = [];
            updatePhotoPreviews();
        }

        // Display all passwords in admin panel
        function displayPasswordsList() {
            const db = getDatabase();
            const passwordsList = document.getElementById('passwordsList');
            passwordsList.innerHTML = '';
            
            Object.keys(db).forEach(password => {
                const passwordItem = document.createElement('div');
                passwordItem.className = 'password-item';
                const hasUploadedPhotos = db[password].uploadedPhotos && db[password].uploadedPhotos.length > 0;
                passwordItem.innerHTML = `
                    <strong>Password:</strong> ${password}<br>
                    <strong>Color:</strong> <span style="color: ${db[password].backgroundColor}">${db[password].backgroundColor}</span><br>
                    <strong>Photos:</strong> ${hasUploadedPhotos ? db[password].uploadedPhotos.length + ' uploaded' : '4 default'}<br>
                    <strong>Text Preview:</strong> ${db[password].languageText.substring(0, 50)}...
                `;
                passwordsList.appendChild(passwordItem);
            });
        }

        // Export database
        function exportDatabase() {
            const db = getDatabase();
            const dataStr = JSON.stringify(db, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'love-projects-database.json';
            link.click();
            
            document.getElementById('adminMessage').innerHTML = '<div class="message success">Database exported successfully!</div>';
        }

        // Reset database to default
        function resetDatabase() {
            if (confirm('Are you sure you want to reset the database to default? All custom passwords will be lost!')) {
                localStorage.removeItem('passwordDatabase');
                initializeDatabase();
                displayPasswordsList();
                document.getElementById('adminMessage').innerHTML = '<div class="message success">Database reset to default successfully!</div>';
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize database, color picker, and photo upload
            initializeDatabase();
            initializeColorPicker();
            initializePhotoUpload();
            
            // Main page events
            document.getElementById('accessBtn').addEventListener('click', checkPassword);
            document.getElementById('configBtn').addEventListener('click', function() {
                showPage('config');
            });
            document.getElementById('adminBtn').addEventListener('click', function() {
                showPage('admin');
            });
            
            // Content selection page events
            document.getElementById('textPageLink').addEventListener('click', function(e) {
                e.preventDefault();
                showContentPage('text');
            });
            document.getElementById('videoPageLink').addEventListener('click', function(e) {
                e.preventDefault();
                showContentPage('video');
            });
            document.getElementById('photosPageLink').addEventListener('click', function(e) {
                e.preventDefault();
                showContentPage('photos');
            });
            
            // Password visibility toggle
            document.getElementById('togglePassword').addEventListener('click', togglePasswordVisibility);
            
            // Real-time admin password check
            document.getElementById('passwordInput').addEventListener('input', checkAdminAccess);
            
            // Configuration page events
            document.getElementById('saveConfigBtn').addEventListener('click', saveConfiguration);
            
            // Enter key support for password input
            document.getElementById('passwordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkPassword();
                }
            });
            
            // Focus on password input
            document.getElementById('passwordInput').focus();
        });
    </script>
</body>
</html>